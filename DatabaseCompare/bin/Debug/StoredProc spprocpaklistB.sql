
BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 

BEGIN
SET NOCOUNT ON 

declare @inNoviPakListID int,
		@inFirmaID int, 
		@nv00)

select @inirma 
							inner join dbo.tbirmaID

IROM dbo.PakDost with(nolock) WHERE PakListID = @inPakListID )
BEGIN
RAISERROR 44445 N'
	
	The records can''t be changed, 
	Some items are allready bound to current list!
	You have to bound new items manualy.
	Origin: spProcPakList'
    RETURN 

END

SET XACT_ABORT ON
BEGIN TRAN

IF @inPakListID = 0 OR @inPakListID IS NULL 
BEGIN 
	INSERT INTO dbo.PakList (Posiljalac, AnalitDostavljac)
			VALUES (@nvFirmaNaziv, @inAnalitDost)

	SET @inNoviPakListID = SCOPE_IDENTITY()

	UPDATE pd
	SET PakListID = @inNoviPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL
END
ELSE 
BEGIN

	UPDATE pd
	SET PakListID = @inPakListID
	FROM dbo.Paket p with(nolock)
	INNER JOIN dbo.PakDost pd on p.ID = pd.PaketID
	WHERE pd.DokumID > 0 
			and )) <= @sdDatum
			and pd.PakListID IS NULL

END 

COMMIT TRAN
SET XA

END 
